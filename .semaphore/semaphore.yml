version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: 'Job #1'
          commands:
            - sudo apt-get update && sudo apt-get install -y ffmpeg curl
            - pip install yt-dlp requests
            - 'export PATH="$PATH:/home/semaphore/.local/bin"'
            - mkdir -p downloads
            - 'cd downloads '
            - 'yt-dlp --format "best[height<=720]/best" --output "%(id)s.%(ext)s" --no-warnings --retries 3 --fragment-retries 3 "https://www.youtube.com/watch?v=dQw4w9WgXcQ"'
            - ls -la
            - artifact push workflow downloads/
